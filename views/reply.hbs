<div class="wrapper">
  <div class='container user-homepage'>
    <div class="profile-setting d-flex flex-column justify-content-between">{{> leftColumn}}</div>
    <div class="main">
      <div class='user-header d-flex flex-row align-items-center'>
        <a href="javascript:history.back()"><i class="back-arrow"></i></a>
        <div class="header-text d-flex flex-column">
          <h5>推文</h5>
        </div>
      </div>

      <div class="tweet d-flex">
        <a href="/users/{{tweet.User.id}}/tweets">
          <img class="avatar" src="{{tweet.User.avatar}}" alt='{{tweet.User.name}}\' s avatar'>
        </a>
        <div class="post-content">
          <div class="post-user d-flex flex-column align-items-start">
            <a href="/users/{{tweet.User.id}}/tweets">
              <span class="user-name">{{tweet.User.name}}</span>
            </a>
            <span class="secondary-text">@{{tweet.User.account}}</span>
          </div>
          <p class="content">{{tweet.description}}</p>
          
          <span class="secondary-text">{{amORpm tweet.createdAt}}</span>
          <span class="secondary-text">{{createdTime tweet.createdAt}}</span>
          <span class="secondary-text">•</span>
          <span class="secondary-text">{{createdYear tweet.createdAt}}年</span>
          <span class="secondary-text">{{createdMonth tweet.createdAt}}月</span>
          <span class="secondary-text">{{createdDay tweet.createdAt}}日</span>
          <div class="tweet-buttons d-flex flex-row align-items-end">
          </div>
        </div>
      </div>
      {{!-- 回覆以及喜歡次數欄位 --}}
      <div class="d-flex">
        <div>
          <span>{{tweet.Replies.length}}回覆</span>
        </div>
        <div>
          <span>{{tweet.LikedUsers.length}}喜歡次數</span>
        </div>
      </div>
      {{!-- 回覆以及喜歡按鈕欄位 --}}
      <div class="d-flex">
        {{!-- 回覆部分後續會用modal --}}
        <button type="button" class="d-flex flex-row align-items-end" data-bs-toggle='modal'
              data-bs-target='#replyModal-{{tweet.id}}'>
              <i class="comment"></i>
              <span>{{this.Replies.length}}</span>
            </button>

        {{!-- 以下為like --}}
        {{#if tweet.isLiked}}
        <button type="button" class="d-flex flex-row align-items-end like-submit-btn liked" data-tweetId="{{tweet.id}}">
          <i class="like user-like"></i>
        </button>
        {{else}}
        <button type="button" class="d-flex flex-row align-items-end like-submit-btn" data-tweetId="{{tweet.id}}">
          <i class="like"></i>
        </button>
        {{/if}}
      </div>

      {{#each replies}}
      <div class="tweet d-flex">
        <a href="/users/{{this.User.id}}/tweets">
          <img class="avatar" src="{{this.User.avatar}}" alt="{{this.User.name}} avatar">
        </a>
        <div class="post-content">
          <div class="post-user d-flex flex-row align-items-end">
            <a href="/users/{{this.User.id}}/tweets">
              <span class="user-name">{{this.User.name}}</span>
            </a>
            <span class="secondary-text">@{{this.User.account}}</span>
            <span class="secondary-text">•</span>
            <span class="secondary-text">{{relativeTimeFromNow this.createdAt}}</span>
          </div>
          <div class='secondary-text reply-text'>回覆 <a href="/users/{{../tweet.User.id}}/tweets">@{{../tweet.User.account}}</a></div>
          <p class='content mb-0'>{{this.comment}}</p>
          <div class="tweet-buttons d-flex flex-row align-items-end">
            <button type="button" class="d-flex flex-row align-items-end">
              <i class="comment"></i>
              <span>13</span>
            </button>
            <button type="button" class="d-flex flex-row align-items-end">
              <i class="like"></i>
              <span>76</span>
            </button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
    <div class="top-users-list"> {{> rightColumn}}</div>
  </div>
</div>

{{! 以下為推文回覆modal }}
      <div class='modal fade' id='replyModal-{{tweet.id}}' tabindex='-1' aria-labelledby='replyModalLabel'
        aria-hidden='true'>
        <div class='modal-dialog'>
          <div class='modal-content'>
            <div class='modal-header'>
              <a class='btn-close' data-bs-dismiss='modal' aria-label='Close'></a>
            </div>
            <div class='modal-body'>
              {{!-- 以下modal推文區 --}}
              <div class="tweet d-flex">
                <a href="/users/{{tweet.User.id}}/tweets">
                  <img class="avatar" src="{{tweet.User.avatar}}" alt='{{tweet.User.name}}\' s avatar'>
                </a>
                <div class="post-content">
                  <div class="post-user d-flex flex-row align-items-end">
                    <a href="/users/{{tweet.User.id}}/tweets">
                      <span class="user-name">{{tweet.User.name}}</span>
                    </a>
                    <span class="secondary-text">@{{tweet.User.account}}</span>
                    <span class="secondary-text">•</span>
                    <span class="secondary-text">{{relativeTimeFromNow tweet.createdAt}}</span>
                  </div>
                  <a href="/tweets/{{tweet.id}}/replies" class="content">{{tweet.description}}</a>
                  <div class='secondary-text reply-text'>回覆 
                    <a href="/users/{{tweet.User.id}}/tweets">@{{tweet.User.account}}</a>
                  </div>
                </div>
              </div>
              {{!-- 以下modal回覆區 --}}
              <form action='/tweets/{{tweet.id}}/replies' method='POST' class="d-flex flex-column justify-content-between mb-0">
                <div class="d-flex align-items-start">
                  <a href="/users/{{user.id}}/tweets">
                    <img class="avatar" src='{{user.avatar}}' alt='{{user.name}}\' s avatar'>
                  </a>
                  <textarea class='text-count-area' id='comment' name='comment' placeholder='推你的回覆'
                    maxlength='140'></textarea>
                </div>
                <div class="d-flex justify-content-end align-items-center">
                  <span class='text-count-number secondary-text'>0 </span>
                  <span class="secondary-text">/ 140</span>
                  <button class="btn btn-primary text-count-btn" type='submit' data-bs-toggle='modal'
                    data-bs-target='#replyModal' disabled>回覆</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>