<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simple Twitter</title>
  <script src="/javascripts/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <link rel="stylesheet" href="/stylesheets/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
    integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous" />
  <script>
    function deleteConfirm() { return confirm("確定要刪除？") }
  </script>
  <script>
    $(document).ready(function () {
      let count1 = $(".nowcount1").val().length
      let count2 = $(".nowcount2").val().length
      $('.now1').text(count1 + '/50')
      $('.now2').text(count2 + '/160')

      $("input").keyup(function () {
        count1 = $(".nowcount1").val().length
        $('.now1').text(count1 + '/50')
      })
      $("textarea").keyup(function () {
        count2 = $(".nowcount2").val().length
        $('.now2').text(count2 + '/160')
      })
    })
  </script>
</head>

<body>
  {{{body}}}

  {{!-- Modal tweet--}}
  <div class="modal fade" id="tweetModal" tabindex="-1" aria-labelledby="tweetModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" style="left: 0;" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form action="/tweets" method="post">
          <div class="modal-body">
            <img src="{{user.avatar}}" class="rounded-circle p-md-0 p-1"
              style="width: 50px; height: 50px; margin:0px 0px 15px -10px" alt="A user" />
            <textarea class="form-control" id="description" name="description" rows="3" placeholder="有什麼新鮮事？"
              maxlength="140" required></textarea>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-tomato">推文</button>
          </div>
      </div>

      {{!-- Modal reply--}}
      <div class="modal fade" id="replyModal" tabindex="-1" aria-labelledby="replyModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="btn-close" style="left: 0;" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="col-7 align-self-center px-md-2 px-4">
              <span class='h5 fw-bold d-none d-sm-inline'>{{tweet.User.name}}
                <span style="color: #6c757d; font-size: 0.675em">@{{tweet.User.account}}．{{moment
                  tweet.createdAt}}</span>
                <p class="mt-2" style="color: black; font-size: 0.675em">{{tweet.description}} </p>
                <p class="mt-2" style="color: tomato; font-size: 0.675em">回覆給@{{tweet.User.account}}</p>
            </div>
            <br>
            <hr>


            <form action="/replies" method="POST" class="mt-2 ">

              <img src="{{user.avatar}}" class="rounded-circle p-md-0 p-1"
                style="width: 50px; height: 50px; margin:0px 0px 15px 0px" alt="A user" />
              <textarea class="form-control" id="content" name="content" rows="3" cols="11" placeholder="推你的回覆"
                maxlength="140" required></textarea>
              <input type="hidden" name="TweetId" value="{{tweet.id}}" />
          </div>

          <div class="col-11 d-flex align-items-center justify-content-center">
            <button type="submit" class="btn btn-tomato rounded-pill mt-3" style="width: 30%;">
              <span class='h5 fw-bold d-none d-sm-inline'>回覆</span>
            </button>
          </div>
          <div class="col-7 align-self-center px-md-2 px-4">
            <span class='h5 fw-bold d-none d-sm-inline'>{{tweet.User.name}}
              <span style="color: #6c757d; font-size: 0.675em">@{{tweet.User.account}}．{{moment
                tweet.createdAt}}</span>
              <p class="mt-2" style="color: black; font-size: 0.675em">{{tweet.content}} </p>
              <p class="mt-2" style="color: tomato; font-size: 0.675em">回覆給@{{tweet.User.account}}</p>
          </div>
          <br>
          <hr>


          <form action="/replies" method="POST" class="mt-2 ">

            <img src="{{user.avatar}}" class="rounded-circle p-md-0 p-1"
              style="width: 50px; height: 50px; margin:0px 0px 15px 0px" alt="A user" />
            <textarea class="form-control" id="content" name="content" rows="3" cols="11" placeholder="推你的回覆"
              maxlength="140" required></textarea>
            <input type="hidden" name="TweetId" value="{{tweet.id}}" />
        </div>

        <div class="col-11 d-flex align-items-center justify-content-center">
          <button type="submit" class="btn btn-tomato rounded-pill mt-3" style="width: 30%;">
            <span class='h5 fw-bold d-none d-sm-inline'>回覆</span>
          </button>
        </div>
        </form>
      </div>
    </div>
  </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script>$(function () { $('[data-toggle="tooltip"]').tooltip() })</script>
</body>