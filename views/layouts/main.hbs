<!DOCTYPE html>
<html class="h-100">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>餐廳評論網</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/style.css">


<body>
  {{#if loginUser}}
  {{> messages}}
  {{!-- 後台登入 --}}
  {{#if loginUser.isAdmin}}
  <div class="container-lg">
    <div class="row">
      {{!-- 左側 fixed 欄位 --}}
      <div class="col-2 p-0" style="height: 100vh; border-right: 1px solid #E6ECF0;">
        <div class="d-flex flex-column mt-2" style="position: fixed; height: 96%; width:178px;">
          {{!-- logo --}}
          <a href="/admin/tweets" class="">
            <img src="/_base/icon/logo.svg">
          </a>
          {{!-- 推文清單 --}}
          <div class="mt-4">
            <a href="/admin/tweets" class="d-flex flex-row align-items-center">
              <img class="ms-2 me-3 svg-fill-main" src="/_base/Property 2=filled, Property 3=home.svg">
              <h5 class="color-main m-0">推文清單</h5>
            </a>
          </div>
          {{!-- 使用者列表 --}}
          <div class="mt-4">
            <a href="/admin/users" class="d-flex flex-row align-items-center">
              <img class="ms-2 me-3" src="/_base/Property 2=outlined, Property 3=user.svg">
              <h5 class="m-0">使用者列表</h5>
            </a>
          </div>
          {{!-- 登出 --}}
          <div class="d-flex flex-column-reverse mt-4" style="flex-grow: 1;">
            <a href="/logout" class="mb-4 d-flex flex-row align-items-center">
              <img class="ms-2 me-3" src="/_base/Property 2=outlined, Property 3=logout.svg">
              <h5 class="m-0">登出</h5>
            </a>
          </div>
        </div>
      </div>
      {{!-- 中間欄位 --}}
      {{{body}}}
    </div>
  </div>
  </div>
  {{else}}
  {{!-- 前台登入 --}}
  <div class="container-lg">
    {{!-- 檢查用 --}}
    {{!-- <div class="row">
      <div class="col-1 border">1</div>
      <div class="col-1 border">2</div>
      <div class="col-1 border">3</div>
      <div class="col-1 border">4</div>
      <div class="col-1 border">5</div>
      <div class="col-1 border">6</div>
      <div class="col-1 border">7</div>
      <div class="col-1 border">8</div>
      <div class="col-1 border">9</div>
      <div class="col-1 border">10</div>
      <div class="col-1 border">11</div>
      <div class="col-1 border">12</div>
    </div> --}}
    <div class="row">
      {{!-- 左側 fixed 欄位 --}}
      <div class="col-2 p-0">
        <div class="d-flex flex-column justify-content-between" style="position: fixed; height:96%; width:178px">
          <div class="mt-2">
            {{!-- logo --}}
            <a href="/" class="">
              <img src="/_base/icon/logo.svg">
            </a>
            {{!-- 首頁 --}}
            <div class="mt-4 mb-4">
              <a href="/tweets" class="d-flex flex-row align-items-center">
                <img class="ms-2 me-3 svg-fill-main" src="/_base/Property 2=filled, Property 3=home.svg">
                <h5 class="color-main m-0">首頁</h5>
              </a>
            </div>
            {{!-- 個人資料 --}}
            <div class="mt-4 mb-4">
              <a href="/users/{{user.id}}/tweets" class="d-flex flex-row align-items-center">
                <img class="ms-2 me-3" src="/_base/Property 2=outlined, Property 3=user.svg">
                <h5 class="m-0">個人資料</h5>
              </a>
            </div>
            {{!-- 設定 --}}
            <div class="mt-4 mb-4">
              <a href="/api/users/{{user.id}}" class="d-flex flex-row align-items-center">
                <img class="ms-2 me-3" src="/_base/Property 2=outlined, Property 3=cog.svg">
                <h5 class="m-0">設定</h5>
              </a>
            </div>
            {{!-- 推文 --}}
            <button id="modalBtn" class="mt-4 mb-4 pill pill-large pill-main " data-bs-toggle="modal"
              data-bs-target="#postTweetModal">推文
            </button>
          </div>
          <div class="">
            {{!-- 登出 --}}
            <div class="">
              <a href="/logout" class="d-flex flex-row align-items-center">
                <img class="ms-2 me-3" src="/_base/Property 2=outlined, Property 3=logout.svg">
                <h5 class="m-0">登出</h5>
              </a>
            </div>
          </div>
        </div>
      </div>
      {{!-- 中間欄位 --}}
      <div class="col col-7 border p-0">
        <div id="body" style="position:relative; overflow: auto;height:100vh">
          {{{body}}}
        </div>
        {{!-- 彈出視窗 Modal --}}
      </div>
      {{!-- 右側 fixed 欄位 --}}
      <div class="col col-3">
        <div class="m-2 mt-3" style="position:fixed; width:auto; background-color:#FAFAFB; border-radius: 16px">
          <h4 class="pt-4 ps-4 pe-4 pb-1">推薦跟隨</h4>
          <hr class="mb-0">
          {{#each users}}
          {{!-- 一個用戶 --}}
          <div class="d-flex flex-row align-items-center ps-3 pe-3 mb-3 mt-4 justify-content-between"
            style="width: 273px">
            <div class="d-flex align-items-center">
              {{!-- 用戶大頭貼 --}}
              <figure class="m-0 me-2" style="width: 50px; height: 50px; border-radius: 50%; overflow: hidden;">
                <img src="{{this.avatar}}" style="object-fit: cover;width:100%;height:100%">
              </figure>
              <div class="me-2">
                {{!-- 用戶名稱 --}}
                <p class="m-0" style="font-weight: 700;">{{this.name}}</p>
                {{!-- 用戶id --}}
                <p class="m-0 color-dark-70" style="font-weight: 500;">@{{this.account}}</p>
              </div>
            </div>
            {{!-- 跟隨按鈕 --}}
            {{#if isFollowed}}
            <form action="/followship/{{this.id}}?_method=DELETE" method="POST">
              <button type="submit" class="pill pill-default pill-main">正在跟隨</button>
            </form>
            {{else}}
            <form action="/followship" method="POST">
              <button type="submit" class="pill pill-default pill-outline">跟隨</button>
            </form>
            {{/if}}
          </div>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
  {{/if}}
  {{else}}
  {{{body}}}
  {{/if}}
  <script src="/index.js"></script>
</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
  integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
  integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

</html>