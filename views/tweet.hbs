<div class="content-fluid">
  <div class=" left rl">
    <a href=""><img class="ac-img" src="/images/ac@2x.png" alt=""></a>
    <div>
      <a href="/tweets" class="icon-home leftbar-text">
        <img class="home-img" src="/images/home@2x.png" alt="">
        <span><strong>首頁</strong></span>
      </a>
    </div>
    <div class="mt-4 mb-1">
      <a href="/users/{{user.id}}" class="icon-user leftbar-text">
        <img class="user-img" src="/images/user@2x.png" alt="">
        <span><strong>個人資料</strong></span>
      </a>
    </div>
    <div class="mt-4 mb-1">
      <a href="/edit" class="icon-setting leftbar-text">
        <img class="setting-img" src="/images/setting@2x.png" alt="">
        <span><strong>設定</strong></span>
      </a>
    </div>
    <div class="tweetbtn-MP">
      <!-- Button trigger modal -->
      <a class="tweetbtn" style="" href="/tweets/new" method="" data-bs-toggle="modal"
        data-bs-target="#staticBackdrop">推文</a>
    </div>

    <div class="mt-4 mb-1 abs logout-re">
      <a href="/logout" class="icon-logout leftbar-text">
        <img class="logout-img" src="/images/logout@2x.png" alt="">
        <span><strong>登出</strong></span>
      </a>
    </div>
  </div>
</div>

<div class="content-fluid middle right-line-2 left-line-2">
  <div class="row">
    <div>
      <div class="fl wid-12">
        <a href="/tweets">
          <img class="backarrow-img" src="/images/back_arrow@2x.png" alt="">
        </a>
      </div>
      <div class="col fl mt-2 wid-80">
        <span class="selftwitterbox-name">User1</span>
        <p class="twitterbox-time">{{tweetsLength}}推文</p>
      </div>
    </div>
    <div>
      <img class="avatarbg-img" src="{{user.background}}" alt="">
    </div>
    <div class="rel">
      <a class="float-start" href="">
        <img class="selfavatar-img abs " style="border-radius: 50%;" src="{{user.avatar}}" alt="">
      </a>
    </div>
    <div class="wid-100">
      <button class="tweetbtn-ol m-3 float-end">
        <a href="" class="text-decoration-n font-color-or" data-bs-toggle="modal"
          data-bs-target="#staticBackdrop-self">編輯個人資料</a>
      </button>
    </div>
    <div class="col fl mt-2 wid-80 ms-3">
      <div>
        <span class="selftwitterbox-name">{{user.name}}</span>
        <p class="twitterbox-time">@{{user.account}}</p>
      </div>
      <div>
        <p class="twitterbox-time text-dark">
          {{user.introduction}}
        </p>
      </div>
      <div>
        <span class="twitterbox-time text-dark">{{user.Followers.length}}個
          <a class="text-decoration-n following-color" href="">跟隨中</a>
        </span>
        <span class="twitterbox-time text-dark">{{user.Followings.length}}位
          <a class="text-decoration-n follow-color" href="">跟隨者</a>
        </span>
      </div>
      <div class="selftab border-none bottom-line-2">
        <ul class="nav mb-4">
          <li class="nav-item">
            <a class="nav-link active{{#ifCond route 'tweet'}}active{{/ifCond}}" href="">推文</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {{#ifCond route ''}}active{{/ifCond}}" href="">回復</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {{#ifCond route ''}}active{{/ifCond}}" href="">喜歡的內容</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  {{#each tweets}}
  {{!-- 推文 start--}}
  <div>
    <div class="fl">
      <img class="ac-img" src="/images/img@2x.png" alt="">
    </div>
    <div class="tweet-flow-text fl">
      <span class="twitterbox-name">{{this.User.name}}</span>
      <span class="twitterbox-time">@{{this.User.name}} ‧ {{relativetimeFromNNow this.createdAt}} </span>
      <p class="twitterbox-text">
        {{this.description}}
      </p>
      <span class="twitterbox-time mx-40"><img class="tweet-flow-img" src="/images/reply@2x.png" alt="">13</span>

      {{#if isLiked}}
      <form action="/tweets/{{this.id}}/unlike" method="POST" style="display: contents;">
        <span class="twitterbox-time">
          <button type="submit" class="btn">
            <img class="tweet-flow-img" src="/images/like@2x.png" alt="">
            {{this.Likes.length}}
          </button>
        </span>
      </form>
      {{else}}
      <form action="/tweets/{{this.id}}/like" method="POST" style="display: contents;">
        <span class="twitterbox-time">
          <button type="submit" class="btn">
            <img class="tweet-flow-img" src="/images/unlike@2x.png" alt="">
            {{this.Likes.length}}
          </button>
        </span>
      </form>
      {{/if}}

      <div class="bottom-line-f"></div>
    </div>
  </div>
  {{!-- 推文 end--}}
  {{/each}}

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <div class=" fl">
            <button type="button font-color-or" class="btn-close btn-close-re" data-bs-dismiss="modal"
              aria-label="Close" onclick="javascript:history.back()"></button>
          </div>
        </div>
        <form action="/tweets/{{tweets.User.id}}" method="POST"></form>
        <div class="modal-body">
          <form action="/tweets" method="POST">
            <img class="avatar-img fl" src="{{user.avatar}}" alt="">
            <span>
              <textarea class="modal-input-tweets mt-3 tweetOne" type="description" name="description" id="description"
                cols="30" rows="10" placeholder="有什麼新鮮事?" maxlength="140"></textarea>
              <input type="hidden" name="UserId" value="{{tweets.User.id}}" />
            </span>
            <span class="hint abs" style="color: #FC5A5A;right:140px; bottom:27px"></span>
            <button class="tweetbtn-s abs tweetOne-button" type="submit">推文</button>
          </form>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop-self" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content height-61">
        <div class="modal-header rel">
          <form action="/users/{{ user.id }}/edit" method="POST" enctype="multipart/form-data">
            <button type="button font-color-or abs" class="btn-close btn-close-re" data-bs-dismiss="modal"
              aria-label="Close"></button>
            <button class="selftweetbtn-s abs flow-end" type="submit">儲存</button>
        </div>

        <div class="selfeditavatar-img">
          <div class="form-row">
            <img id="bannerImg" src="{{user.background}}" alt="background"
              style="width:632px; margin-left:0px; height: 200px;margin-top:0px ;position:relative">
            <label class="form-label" for="background">
              <img style="position: absolute;left:269px; top:143px; z-index:3;width:35px;" src="/images/camera.png"
                alt="upload">
              <img style="position: absolute;left:366px; top:144px; z-index:3;width:28px;"
                src="/images/btn_close_wh@2x.png" alt="">
            </label>
            <input class="form-control" type="file" class="form-control-file" id="background" name="background"
              style="display: none;">
          </div>

          {{!-- 頭像 --}}
          <div class="form-row">
            <img id="avatarImg" src="{{user.avatar}}" alt="avatar"
              style="border: 4px solid white; height: 150px; width: 150px; margin: -110px 0 0 45px; border-radius: 50%; position: relative;">
            <label class="form-label" for="avatar">
              <img style="position: absolute;left:101px; top:225px; z-index:3;width:35px;" src="/images/camera.png"
                alt="upload">
            </label>
            <input class="form-control" type="file" class="form-control-file" id="avatar" name="avatar"
              style="display: none;">
          </div>
          <div class="form-name p-2" style="margin-top: 20px;">
            <p class="selfname">名稱</p>
            <textarea class="form-control selfbg" placeholder="" name="name" id="name" maxlength="50"
              style="padding: 15px 0 0 0;" value="{{user.name}}">{{user.name}}</textarea>
          </div>
          <div class="form-intro p-2">
            <p class="selfname">自我介紹</p>
            <textarea class="form-control selfintro" placeholder="" name="introduction" id="introduction"
              maxlength="160" style="padding: 15px 0 0 0;"
              value="{{user.introduction}}">{{user.introduction}}</textarea>
          </div>
        </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>

{{> rightbar}}

{{!--
<script>
  const tweetOneButton = document.querySelector('.tweetOne-button')
  const tweet = document.querySelector('.tweetOne')
  const hint = document.querySelector('.hint')
  tweetOneButton.addEventListener('click', (e) => {
    if (tweet.innerText === '') {
      e.preventDefault()
      console.log(hint.innerText)
      hint.innerText = '內容不可空白'
    }
  })
</script> --}}