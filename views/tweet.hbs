{{>navs/user-left-column route='tweets'}}

<div style="position: absolute; left: 332px; width:641px;" class="border">
  {{>header route='main' title='首頁'}}
  {{!-- 發文 --}}
  <div style="padding: 16px 24px; height: 137px" class="d-flex flex-column mx-auto border-bottom" data-bs-toggle="modal"
    data-bs-target="#myModalmain">
    <div class="d-flex flex-row">
      <a class="" href="/users/{{user.id}}/tweets">
        <div style="width:50px; height:50px; background-color:#FF6600" class="rounded-circle overflow-hidden">
          <img src={{#if user.avatar}}{{user.avatar}}{{else}}"/icon/avatar.jpg"{{/if}}
            style="aspect-ratio: 1 / 1;width: 50px;object-fit: cover;object-position: center;" alt="avatar">
        </div>
      </a>
      <div style="margin-left: 8px" class="d-flex flex-column">
        <p style="color:#6C757D" class="ms-1 mt-2">有什麼新鮮事?</p>
      </div>
    </div>
    <div class="text-end mt-auto">
      <button class="btn py-1 px-3 " style="background-color:#FF6600; color:white; border-radius: 30px">
        推文
      </button>
    </div>
  </div>

  {{!-- 留言 --}}
  <div class="col-12 mx-auto mt-2">
    {{#each tweets}}
    {{>contentcards/tweet-card}}
    {{/each}}
  </div>
</div>


{{>top-users-bar}}


{{!-- modal 首頁的推文 --}}

<div class="modal" id="myModalmain" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="d-flex justify-content-start">
        <button type="button" class="btn-close ms-2 mt-2" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <hr style="margin-top: 5px; margin-bottom: 5px;">

      <form action="/tweets" method="POST">
        <div class="ms-2">
          <div class="d-flex flex-row">
            <a href="#">
              <img class="" src="https://assets-lighthouse.alphacamp.co/uploads/image/file/14990/Bernard_keyer.png"
                alt="" width="40px" height="40px" style="background-color:#FF6600; border-radius: 30px">
            </a>
            <textarea class="ms-1 mt-2" name="description" id="contentInput" cols="45" rows="6" placeholder="有什麼新鮮事"
              style="border:none"></textarea>
          </div>
        </div>

        <div class="d-flex flex-row-reverse mb-3 me-2">

          <button class="btn pt-1 pb-1 ps-3 pe-3" style="background-color:#FF6600; color:white; border-radius: 30px"
            type="submit" id="submitBtn">
            推文
          </button>
          {{!-- DOM render --}}
          <span id="emptyContentMessage" class="text-danger me-2 mt-2" style="font-size: 10px"></span>
        </div>
      </form>
    </div>
  </div>
</div>


{{!-- 留言modal --}}

{{#each tweets}}
<div class="modal" id="ModalReply{{this.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="d-flex justify-content-start">
        <button type="button" class="btn-close ms-2 mt-2" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <hr style="margin-top: 5px; margin-bottom: 5px;">

      <form action="/tweets/{{this.id}}/replies" method="POST">
        <div class="ms-2">
          <div class="d-flex flex-row">
            <a href="#">
              <img class="" src="https://assets-lighthouse.alphacamp.co/uploads/image/file/14990/Bernard_keyer.png"
                alt="..." width="40px" height="40px" style="background-color:#FF6600; border-radius: 30px">
            </a>
            <p class="inline ms-1 mt-1 modalUserName">{{this.User.name}}</p>
            <span class="ms-1 mt-2 modalAccount" style="font-size: 0.2rem;">@{{this.User.account}}</span>
            <span class="ms-1 mt-2 modalTime" style="font-size: 0.2em;">・{{relativeTimeFromNow this.createdAt}}</span>
          </div>

          <div class="col-10 mx-auto ps-1">
            <p>{{this.description}} </p>
            <P style="font-size: 14px">回覆給<span class="modalAccount" style="color:#FF6600">@{{this.User.account}}</span>
            </P>
          </div>

          <div class="d-flex flex-row">
            <a href="#">
              <img class="" src="https://i.imgur.com/Na2PT87.jpg" alt="" width="40px" height="40px"
                style="background-color:#FF6600; border-radius: 30px">
            </a>
            <textarea class="ms-1 mt-2 replyContentInput" name="comment" id="" cols="45" rows="6" placeholder="推你的回覆"
              style="border:none"></textarea>
          </div>
        </div>

        <div class="d-flex flex-row-reverse mb-3 me-2">
          <button class="btn pt-1 pb-1 ps-3 pe-3" style="background-color:#FF6600; color:white; border-radius: 30px"
            type="submit">
            回覆
          </button>
          <span class="replyEmptyContentMessage"></span>
        </div>
      </form>
    </div>
  </div>
</div>
{{/each}}