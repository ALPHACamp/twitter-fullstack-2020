<div class="container" id="profile-region" style="height: 1200px;">
  <div id="profile-left">
    {{#ifCond targetUser.id user.id}}
      {{> home-tabs route='tweet' }}
    {{else}}
      {{> home-tabs }}
    {{/ifCond}}
  </div>

  <div id="profile-middle">
    <div class="header">
      <div class="coin">
        <a href="history.back()">
          <img src="/images/vector.png" alt="vector">
        </a>
      </div>
      <div class="name">
        <h5>{{targetUser.name}}</h5>
        <span>{{tweetsLength}} 推文</span>
      </div>
    </div>
    <div class="user-info">
      <img src="{{targetUser.cover}}.jpg" alt="cover" style="width: 100%; height: 200px;">
      <div class="avatar-button">
        <img class="avatar" src="{{targetUser.avatar}}" alt="avatar">

        {{#ifCond targetUser.id user.id}}
        <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#edit-profile-modal">
          編輯個人資料
        </button>
        {{else}}
          {{#if user.isFollowed}}
          <form action="/followships/{{targetUser.id}}?_method=DELETE" method="POST">
            <button type="submit" class="btn follow-bottom">正在跟隨</span>
            </button>
          </form>
          {{else}}
          <form action="/followships" method="POST">
            <button type="submit" class="btn follow-bottom removefollow" name="id" value={{targetUser.id}}>
              跟隨
            </button>
          </form>
          {{/if}}
        {{/ifCond}}
        
        <!-- Modal -->
        <div class="modal fade" id="edit-profile-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog m-0 p-0" style="width: 634px; height: 610px;">
            <div class="modal-content" style="width: 634px; height: 610px;">
              <div class="modal-header">
                <div class="header-left">
                  <button type="button" class="btn-close p-0 m-0" data-bs-dismiss="modal" aria-label="Close"></button>
                  <h5 class="modal-title" style="font-weight: 700; margin-left: 36.5px;">編輯個人資料</h5>
                </div>
                <form action="POST" class="header-right">
                  <button type="button" class="btn save-button">
                    儲存
                  </button>
                </form>
              </div>
              <div class="modal-body">
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="name">
        <h5>{{targetUser.name}}</h5>
        <span>@{{targetUser.account}}</span>
      </div>
      <span class="introduction" style="display: block;">{{targetUser.introduction}}</span>
      <div class="follow">
        <div style="margin-right: 20px;">
          <span class="first">{{targetUser.Followings.length}} 個</span>
          <span class="second"><a href="/users/{{targetUser.id}}/followings">跟隨中</a></span>
        </div>
        <div>
          <span class="first">{{targetUser.Followers.length}} 位</span>
          <span class="second"><a href="/users/{{targetUser.id}}/followers">跟隨者</a></span>
        </div>
      </div>
    </div>
    {{#if tweets}}
      {{> profile-tabs route='tweets'}}
      <div class="scroll-container">
      {{#each tweets}}
      <a href="/tweets/{{this.id}}">
        <div class="tweet">
          <div>
            <img class="avatar" src="{{../targetUser.avatar}}" alt="avatar">
          </div>
          <div class="content">
            <div class="d-flex align-items-center" style="height: 26px;">
              <span class="name">{{../targetUser.name}}</span>
              <span class="account">@{{../targetUser.account}}•{{relativeTimeFromNow this.createdAt}}</span>
            </div>
            <div class="description">
              {{this.description}}
            </div>
            <div class="footer">
              <img src="/images/comment.png" alt="comment">
              <span style="margin-right: 41.3px;">{{this.repliedCount}}</span>
              {{#if isLiked}}
              <form action="/tweets/{{this.id}}/unlike" method="POST">
                <button type="submit"><img src="/images/redLove.png" alt="like"></button>
              </form>
              {{else}}
              <form action="/tweets/{{this.id}}/like" method="POST">
                <button type="submit"><img src="/images/like.png" alt="like"></button>
              </form>
              {{/if}}
              <span>{{this.likedCount}}</span>
            </div>
          </div>
        </div>
      </a>
      {{/each}}
      </div>
    {{/if}}
    {{#if replies}}
    {{> profile-tabs route='replies'}}
    <div class="scroll-container">
      {{#each replies}}
      <div class="tweet">
        <div>
          <img class="avatar" src="{{../targetUser.avatar}}" alt="avatar">
        </div>
        <div class="content">
          <div class="d-flex align-items-center" style="height: 26px;">
            <span class="name">{{../targetUser.name}}</span>
            <span class="account">@{{../targetUser.account}}•{{relativeTimeFromNow this.createdAt}}</span>
          </div>
          <div class="reply-to">
            <span class="reply">回復</span>
            <span class="account">@{{this.Tweet.User.account}}</span>
          </div>
          <div class="description">
            {{this.comment}}
          </div>
        </div>
      </div>
      {{/each}}
    </div>
    {{/if}}
    {{#if likes}}
      {{> profile-tabs route='likes'}}
      <div class="scroll-container">
        {{#each likes}}
        <a href="/tweets/{{this.Tweet.id}}">
          <div class="tweet">
            <div>
              <img class="avatar" src="{{this.Tweet.User.avatar}}" alt="avatar">
            </div>
            <div class="content">
              <div class="d-flex align-items-center" style="height: 26px;">
                <span class="name">{{this.Tweet.User.name}}</span>
                <span class="account">@{{this.Tweet.User.account}}•{{relativeTimeFromNow this.createdAt}}</span>
              </div>
              <div class="description">
                {{this.Tweet.description}}
              </div>
              <div class="footer">
                <img src="/images/comment.png" alt="comment">
                <span style="margin-right: 41.3px;">{{this.repliedCount}}</span>
                {{#if isLiked}}
                <form action="/tweets/{{this.Tweet.id}}/unlike" method="POST">
                  <button type="submit"><img src="/images/redLove.png" alt="like"></button>
                </form>
                {{else}}
                <form action="/tweets/{{this.Tweet.id}}/like" method="POST">
                  <button type="submit"><img src="/images/like.png" alt="like"></button>
                </form>
                {{/if}}
                <span>{{this.likedCount}}</span>
              </div>
            </div>
          </div>
        </a>
        {{/each}}
      </div>
    {{/if}}
  </div>
  
  <div id="profile-right">
    {{> home-user-tabs}}
  </div>
</div>