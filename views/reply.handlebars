{{> nav}}

<H1>單一推文回覆</H1>

<div class="flex-column" style="width: 600px; border: 1px solid #E6ECF0">
  <!--單一推文-->

  <div class="card mb-3" style="width: 540px;">
    <div class="row g-0">


      <div class="card-body d-flex">
        <a href="/users/{{tweet.UserId}}" style="text-decoration: none;">
          <img src="{{tweet.User.avatar}}" alt="..." syle="max-height:75px; max-width:75px;">
        </a>
        <div>
          <h5 class="card-title">{{tweet.User.name}}{{tweet.User.account}}</h5>
          <p class="card-text">{{tweet.description}}</p>
        </div>
        </a>
      </div>

      <div>
        <h1>{{moment_format tweet.createdAt}}</h1>
      </div>

      <div calss="col-md-2">
        <div class="card-footer">
          <div class="d-flex">
            <div class="mr-5">
              <p>{{ReplyCount}}</p>

              {{!-- ==================回覆============ --}}
              <button class="btn btn-primary" data-toggle="modal" data-target="#reply{{tweet.id}}">
                回覆ICON
              </button>
              {{!-- ==================回覆============ --}}

            </div>
            <div>
              <p>{{LikedCount}}</p>
              {{#if isLiked}}
              <form action="/tweets/{{tweet.id}}/unlike" method="POST">
                <button type="submit" class="btn btn-danger">unlike</button>
              </form>
              {{else}}
              <form action="/tweets/{{tweet.id}}/like" method="POST">
                <button type="submit" class="btn btn-danger">like</button>
              </form>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--回覆版塊-->
  {{#each tweet.Replies}}
  <div class="card mb-3" style="width: 540px;">
    <div class="row g-0">

      <div class="card-body d-flex">
        <a href="/users/{{this.UserId}}" style="text-decoration: none;">
          <img src="{{this.User.avatar}}" alt="..." syle="max-height:75px; max-width:75px;">
        </a>
        <div>
          <h5 class="card-title">
            {{this.User.name}}{{this.User.account}}----{{moment_fromNow this.User.createdAt}}
          </h5>
          <p class="card-text">{{this.comment}}</p>
        </div>
        </a>
      </div>

    </div>
  </div>
  {{/each}}

</div>

<!--================= 跟隨 ================= -->
{{> follower}}

<!--================= 回覆 Modal ================= -->

<div class="modal fade" id="reply{{tweet.id}}" tabindex="-1" aria-labelledby="postTweetModalLabel" aria-hidden="true">
  <form action="" method="post">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">X</button>
        </div>

        <div class="modal-body">
          <div class="row">

            <div class="col-1">
              <img src="{{tweet.User.avatar}}" style="width: 50px;height: 50px" alt="">
            </div>

            <div class="col-11">

              <p>{{tweet.User.id}}·{{tweet.User.name}}·{{moment_fromNow tweet.Users.createdAt}}</p>
              <p>{{tweet.description}}</p>
              <p>回覆給 {{tweet.User.account}}</p>
            </div>
          </div>

          <hr>
          {{!-- 使用者個人圖片 --}}
          <div class="d-flex">
            <div class="">
              <img src="{{user.avatar}}" style="width: 50px;height: 50px" alt="">
            </div>

            <div class="">
              <textarea placeholder="推你的回覆" name="comment"></textarea>
              <button type="submit" class="btn">回覆</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </form>
</div>