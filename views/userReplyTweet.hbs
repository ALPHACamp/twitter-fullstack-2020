<div class="container-fluid m-0">
  <div class="row">
    {{>leftColumnUser}}
    {{!-- 中間 --}}
    <div class="col-5 p-0">
      <div class="d-flex flex-column align-items-center"
        style="background: #FFFFFF; border: 1px solid #E6ECF0; box-sizing: border-box;">
        {{!-- 上方返回區塊 --}}
        <div class="d-flex flex-nowrap" style="width: 100%;">
          <a href="/" class="m-3">
            <svg width="17" height="14" viewBox="0 0 17 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M16 5.99988H3.41399L7.70699 1.70687C8.09699 1.31687 8.09699 0.683875 7.70699 0.292875C7.31699 -0.0981249 6.68399 -0.0971249 6.29299 0.292875L0.292988 6.29288C-0.0970117 6.68288 -0.0970117 7.31588 0.292988 7.70687L6.29299 13.7069C6.48799 13.9019 6.74299 13.9999 6.99999 13.9999C7.25699 13.9999 7.51199 13.9019 7.70699 13.7069C8.09699 13.3169 8.09699 12.6839 7.70699 12.2929L3.41399 7.99988H16C16.553 7.99988 17 7.55288 17 6.99988C17 6.44688 16.553 5.99988 16 5.99988Z"
                fill="black" />
            </svg>
          </a>
          <div class="header ml-4">
            <h3 class="m-0 p-0">{{results.name}}</h3>
            <span class="h6 text-muted">{{results.tweetCount}} 推文</span>
          </div>
        </div>
        {{!-- cover&avatar --}}
        <div class="img-wrapper d-flex flex-column flex-nowrap" style="position:relative;">
          <img src="{{results.cover}}" class="card-img-top" alt="background" width="100%" height="200px"
            style="object-fit: cover;">
          <img src="{{results.avatar}}" class="rounded-circle" alt="avatar" width="140" height="140"
            style="border: 4px solid #FFFFFF; position:absolute; top:60%; left:14px;">
        </div>
        <div class="d-flex flex-column flex-nowrap border-bottom" style="width: 100%;">
          <div class="d-flex flex-nowrap justify-content-end align-items-center p-2">
            {{#ifEqual results.id currentId}}
            {{!-- 是本人 --}}
            <button class="btn rounded-pill" data-toggle="modal" data-target="#editUser"
              style="color:#FF6600; border: 1px solid #FF6600">編輯個人資料</button>
            {{else}}
            {{!-- 不是本人 --}}
            <div class="p-2 text-right">
              <a class="float-right mr-2" style="border:1px solid #FF6600;border-radius: 100px; padding:5px" href="#">
                <svg width="24" height="22" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M17.25 0.0180664H2.75C1.233 0.0180664 0 1.25207 0 2.77007V15.2651C0 16.7831 1.233 18.0181 2.75 18.0181H17.25C18.767 18.0181 20 16.7831 20 15.2651V2.77007C20 1.25207 18.767 0.0180664 17.25 0.0180664ZM2.75 1.51807H17.25C17.94 1.51807 18.5 2.07807 18.5 2.76807V3.48207L10.45 8.84907C10.177 9.02907 9.824 9.03107 9.55 8.84707L1.5 3.48207V2.76807C1.5 2.07807 2.06 1.51807 2.75 1.51807ZM17.25 16.5161H2.75C2.06 16.5161 1.5 15.9561 1.5 15.2661V5.24007L8.74 10.0701C9.123 10.3261 9.562 10.4541 10 10.4541C10.44 10.4541 10.877 10.3261 11.26 10.0711L18.5 5.24107V15.2631C18.5 15.9531 17.94 16.5131 17.25 16.5131V16.5161Z"
                    fill="#FF6600" />
                </svg>
              </a>
            </div>
            <div class="p-2 text-right">
              <a class="float-right mr-2" style="border:1px solid #FF6600;border-radius: 100px; padding:5px" href="#">
                <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M23.24 3.26003H20.815V0.832031C20.815 0.418031 20.479 0.0820312 20.065 0.0820312C19.651 0.0820312 19.315 0.418031 19.315 0.832031V3.26003H16.89C16.476 3.26003 16.14 3.59503 16.14 4.01003C16.14 4.42503 16.476 4.76003 16.89 4.76003H19.316V7.18403C19.316 7.59803 19.652 7.93403 20.066 7.93403C20.48 7.93403 20.816 7.59803 20.816 7.18403V4.76003H23.241C23.656 4.76003 23.991 4.42303 23.991 4.01003C23.991 3.59703 23.655 3.26003 23.241 3.26003H23.24ZM17.01 10.866C17.03 8.43203 16.228 6.26903 14.752 4.77603C13.428 3.43403 11.636 2.69203 9.70604 2.68303H9.69304C7.76304 2.69303 5.97104 3.43303 4.64704 4.77503C3.17204 6.27003 2.37004 8.43303 2.39004 10.867C2.42604 15 0.467036 16.56 0.390036 16.62C0.130036 16.813 0.0230359 17.15 0.124036 17.458C0.226036 17.766 0.514036 17.973 0.836036 17.973H5.55204C5.66204 20.199 7.49204 21.98 9.74604 21.98C12 21.98 13.829 20.2 13.94 17.973H18.565C18.885 17.973 19.169 17.767 19.272 17.463C19.375 17.159 19.272 16.82 19.017 16.625C18.935 16.561 16.974 15 17.009 10.865L17.01 10.866ZM9.74504 20.48C8.31904 20.48 7.15904 19.37 7.05104 17.972H12.439C12.331 19.372 11.171 20.479 9.74504 20.479V20.48ZM2.45504 16.473C3.15704 15.378 3.91204 13.569 3.88904 10.855C3.87204 8.79303 4.50304 7.05503 5.71404 5.83003C6.75704 4.77403 8.17204 4.19003 9.70004 4.18403C11.227 4.19103 12.643 4.77403 13.685 5.83003C14.895 7.05603 15.525 8.79303 15.508 10.855C15.486 13.569 16.24 15.378 16.945 16.473H2.45504Z"
                    fill="#FF6600" />
                </svg>
              </a>
            </div>
            {{!-- 追蹤 --}}
            {{#if results.isFollowed}}
            <div class="p-2 text-right">
              <form action="/followships/{{results.id}}?_method=DELETE" method="post">
                <button type="submit" class="btn rounded-pill"
                  style="color:white ;background-color:#FF6600; border: 1px solid #FF6600">正在跟隨</button>
              </form>
            </div>
            {{else}}
            <form action="/followships" method="post">
              <input type="hidden" name="id" value="{{results.id}}">
              <button type="submit" class="float-right px-4 py-2 float-right btn rounded-pill"
                style="color:#FF6600; border: 1px solid #FF6600">跟隨</button>
            </form>
            {{/if}}
            {{/ifEqual}}
          </div>
          <div class="results-info container mt-3">
            <h3 class="m-0 p-0">{{results.name}}</h3>
            <span class="text-muted m-0 p-0">{{results.account}}</span>
            <p class="my-2">{{results.introduction}}</p>
            <div class="results-relation d-flex flex-nowrap">
              <a class="text-decoration-none" href="/users/{{results.id}}/followings">
                <div class="mr-3 font-weight-bold" style="color: black;">{{results.followingCount}} 個<span
                    class="text-muted">追隨中</span>
                </div>
              </a>
              <a class="text-decoration-none" href="/users/{{results.id}}/followers">
                <div class="mr-3 font-weight-bold" style="color: black;">{{results.followerCount}} 位<span
                    class="text-muted">追隨者</span>
                </div>
              </a>
            </div>
          </div>
          <div class="d-flex flex-nowrap justify-content-start mt-4">
            <div class="text-center py-3" style="width: 130px;">
              <a class="font-weight-bold text-decoration-none" href="/users/{{results.id}}/tweets">推文</a>
            </div>
            <div class="text-center py-3" style="width: 130px;">
              <a class="font-weight-bold text-decoration-none" style="color:#FF6600"
                href="/users/{{results.id}}/repliesTweet">推文與回覆</a>
            </div>
            <div class="text-center py-3" style="width: 130px;">
              <a class="font-weight-bold text-decoration-none" href="/users/{{results.id}}/like">喜歡的內容</a>
            </div>
          </div>
        </div>
        {{!-- card --}}
        {{#each results.Replies}}
        <div class="row border-bottom py-3 text-break" style="width: 100%;">
          {{!-- avatar --}}
          <div class="col-2 text-center">
            <a href="/users/{{this.Tweet.UserId}}/tweets">
              <img class="rounded-circle mt-2" src="{{this.Tweet.User.avatar}}" alt="img" width="50px" height="50px">
            </a>
          </div>
          {{!-- content --}}
          <div class="col">
            <a href="/tweets/{{this.Tweet.id}}/replies" style="text-decoration: none; color:black">
              <div class="card-body ml-1" style="padding:10px">
                <div class="card-text">
                  <span style="font-weight: bolder;">{{this.Tweet.User.name}} </span>
                  <span class="text-muted"> {{this.Tweet.User.account}}</span>
                  <span class=" text-muted mr-auto">．{{moment this.Tweet.createdAt}}</span>
                  <p class="card-text mt-1">{{this.Tweet.description}}</p>
                </div>
              </div>
            </a>
            <div class="col-12 mb-2">
              <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                data-toggle="modal" data-target="#replyTweet{{this.Tweet.id}}">
                <path
                  d="M8.77881 1.40127L6.18631 1.39502H6.18506C3.45131 1.39502 1.31006 3.53689 1.31006 6.27127C1.31006 8.83252 3.30131 10.775 5.97568 10.8775V13.27C5.97568 13.3375 6.00318 13.4488 6.05068 13.5219C6.13943 13.6625 6.29068 13.7388 6.44568 13.7388C6.53193 13.7388 6.61881 13.715 6.69693 13.665C6.86193 13.56 10.7426 11.0775 11.7519 10.2238C12.9407 9.21752 13.6519 7.74252 13.6538 6.27877V6.26814C13.6501 3.53877 11.5101 1.40127 8.77881 1.40064V1.40127ZM11.1457 9.50877C10.4369 10.1088 8.10693 11.6369 6.91318 12.4106V10.4188C6.91318 10.16 6.70381 9.95002 6.44443 9.95002H6.19693C3.90943 9.95002 2.24818 8.40252 2.24818 6.27127C2.24818 4.06252 3.97818 2.33252 6.18568 2.33252L8.77756 2.33877H8.77881C10.9863 2.33877 12.7163 4.06752 12.7176 6.27377C12.7157 7.46752 12.1288 8.67627 11.1463 9.50877H11.1457Z"
                  fill="#657786" />
              </svg>
              <small class="text-muted mr-5">{{this.Tweet.replyCount}}</small>
              {{#if this.Tweet.tweetIsLiked}}
              <form action="/tweets/{{this.Tweet.id}}/unlike" method="post" style="display: inline-block;">
                <button type="submit" style="background: none;border: none;">
                  <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M11 19.6381H10.986C8.403 19.5901 0.949997 12.8561 0.949997 6.47812C0.949997 3.41412 3.475 0.724121 6.353 0.724121C8.643 0.724121 10.183 2.30412 10.999 3.45412C11.813 2.30612 13.353 0.724121 15.644 0.724121C18.524 0.724121 21.048 3.41412 21.048 6.47912C21.048 12.8551 13.594 19.5891 11.011 19.6361H11V19.6381Z"
                      fill="#E0245E" />
                  </svg>
                </button>
              </form>
              {{else}}
              <form action="/tweets/{{this.Tweet.id}}/like" method="post" style="display: inline-block;">
                <button type="submit" style="background: none;border: none;">
                  <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M7.5 13.5239H7.49125C5.87687 13.4939 1.21875 9.28514 1.21875 5.29889C1.21875 3.38389 2.79687 1.70264 4.59562 1.70264C6.02687 1.70264 6.98937 2.69014 7.49937 3.40889C8.00812 2.69139 8.97062 1.70264 10.4025 1.70264C12.2025 1.70264 13.78 3.38389 13.78 5.29951C13.78 9.28451 9.12125 13.4933 7.50687 13.5226H7.5V13.5239ZM4.59625 2.64076C3.29625 2.64076 2.15687 3.88326 2.15687 5.30014C2.15687 8.88764 6.55312 12.5476 7.50062 12.5864C8.44937 12.5476 12.8444 8.88826 12.8444 5.30014C12.8444 3.88326 11.705 2.64076 10.405 2.64076C8.825 2.64076 7.9425 4.47576 7.935 4.49389C7.79125 4.84514 7.2125 4.84514 7.06812 4.49389C7.05937 4.47514 6.1775 2.64076 4.59687 2.64076H4.59625Z"
                      fill="#657786" />
                  </svg>
                </button>
              </form>
              {{/if}}
              <small class="text-muted">{{this.Tweet.likeCount}}</small>
            </div>
          </div>
        </div>
        {{/each}}
      </div>
    </div>
    {{>rightColumn}}
  </div>
</div>
</div>


<!-- editUser Modal -->
<div class="modal fade" id="editUser" tabindex="-1" role="dialog" aria-labelledby="editUser" aria-hidden="true"
  data-backdrop="true">
  <form action="/users/{{results.id}}/edit?_method=PUT" method="post" enctype="multipart/form-data">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header m-2 p-2">
          <div class="row" style="width: 100%;">
            <div class="col-1 text-left">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span style="color: #FF6600;" aria-hidden="true">x</span>
              </button>
            </div>
            <div class="col-8">
              <h5 class="modal-title "><strong>編輯個人資料</strong></h5>
            </div>
            <div class="col-3 text-right">
              <button type="submit" class="btn rounded-pill" style="background-color: #FF6600; color:white">
                儲存
              </button>
            </div>
          </div>
        </div>
        <div class="modal-body m-1 p-1">
          {{!-- cover&avatar --}}
          <div class="img-wrapper d-flex flex-column flex-nowrap" style="position:relative;">
            <label for="cover" class="btn btn-light">
              <input type="file" id="cover" name="cover" class="form-control-file" style="display: none;">
              <i class="fa fa-camera-retro" aria-hidden="true"></i>上傳背景圖
              <img src="{{results.cover}}" class="card-img-top" alt="background" width="100%" height="200px"
                style="object-fit: cover;">
            </label>
            <label for="avatar" class="btn btn-light">
              <input type="file" id="avatar" name="avatar" class="form-control-file" style="display: none;">
              <i class="fa fa-camera-retro" aria-hidden="true"></i>上傳頭貼
              <img src="{{results.avatar}}" class="rounded-circle mb-5" alt="avatar" width="140" height="140"
                style="border: 4px solid #FFFFFF; position:absolute; top:60%; left:14px;">
            </label>


          </div>
          <div class="d-flex flex-column mt-5">
            <div class="p-2 mt-3">
              <span class="mt-3">名稱</span><br>
              <textarea type="text" name="name" id="name" cols="55" rows="1" class="border-bottom form-control"
                style="resize:none;outline:none;wrap:off;overflow:auto;border-color:transparent">{{results.name}}</textarea>
            </div>
            <div class="p-2 mt-3">
              <span class="mt-3">自我介紹</span><br>
              <textarea type="text" name="introduction" id="introduction" cols="55" rows="4"
                class="border-bottom form-control"
                style="resize:none;outline:none;wrap:off;overflow:auto;border-color:transparent">{{results.introduction}}</textarea>
            </div>
          </div>

        </div>
      </div>
    </div>
  </form>
</div>


<!-- replyTweet Modal -->
{{#each results.Replies}}
<div class="modal" id="replyTweet{{this.Tweet.id}}" tabindex="-1" role="dialog" aria-labelledby="replyTweet">
  <form action="/tweets/{{this.Tweet.id}}/replies" method="post">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card" style="border-color:transparent;">
            <div class="row no-gutters">
              <div class="col-1 d-flex flex-column align-items-center">
                <img src="{{../results/avatar}}" alt="" style="width: 50px;height:50px; border-radius: 50%">
                <div class="vertical-line" style="width: 2px; height:100% ; background-color:#CCD6DD;"></div>
              </div>
              <div class="col-10 ml-3 mb-1">
                <span style="font-size: 15px;">
                  <span style="font-weight: bold;">{{this.Tweet.User.name}}</span>
                  <span class="ml-1 text-muted">{{this.Tweet.User.account}}．{{moment this.Tweet.createdAt}}</span> <br>
                  <span>{{this.Tweet.description}}</span> <br>
                </span>
                <span class="text-muted" style="font-size: 13px;">
                  回覆給
                  <span style="color: #FF6600;">{{this.Tweet.User.account}}</span>
                </span>
              </div>
              <hr>
              <div class="col-1 mt-3">
                <img src="{{../user.avatar}}" class="card-img" alt="img" style="border-radius: 50%;">
              </div>
              <div class="col ml-3 mt-3">
                <textarea class="w-100" name="comment" cols="25" rows="10" placeholder="推你的回覆"
                  style="resize:none;outline:none;wrap:off;overflow:auto;border-color:transparent"></textarea>
                <div class="card-text text-right">
                  <button type="submit" class="btn rounded-pill"
                    style="background-color: #FF6600; color:white">回覆</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
{{/each}}