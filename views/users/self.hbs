<div class="row">
  <!-- 左側nav bar -->
  <div class="col-3" style="padding:0 0 0 120px;">

    <div class=" container" style="padding: 0;">

      <nav class="navbar">
        <div class="container-fluid">
          <img src="/stylesheets/icons/logo.svg" width="40" height="40" href="#" alt="logo">
        </div>
      </nav>

      <nav class="navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="#" style="color: rgb(255, 106, 0);font-size:18px;">
            <img style="margin: 0 7px 5px 0;" src="/stylesheets/icons/homepage.png" width="18" height="18" href=""
              alt="homepage">
            <strong>首頁</strong>
          </a>
        </div>
      </nav>

      <nav class="navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="/users/{{user.id}}" style="color: black;font-size:18px;">
            <img style="margin: 0 7px 5px 0;" src="/stylesheets/icons/user_outlined.svg" width="18" height="18"
              href="/users/{{user.id}}" alt="profile">
            <strong>個人資料</strong>
          </a>
        </div>
      </nav>

      <nav class="navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="#" style="color: black;font-size:18px;">
            <img style="margin: 0 7px 5px 0;" src="/stylesheets/icons/cog_outlined.svg" width="18" height="18" href="#"
              alt="setting">
            <strong>設定</strong>
          </a>
        </div>
      </nav>

      <nav class="navbar">
        <div class="container-fluid">
          <button type="button" id="btn-nav-tweet" data-bs-toggle="modal" data-bs-target="#tweetModal"
            style="color: white; background-color:rgb(255, 106, 0); font-size:18px;">
            <strong>推文</strong>
          </button>
        </div>
      </nav>

    </div>
  </div>

  <!-- 上方head -->
  <div class="col-5" style="padding:0;background-color:white; border:2px #ECECEC solid; border-top-color:white;">
    <div style="padding:15px;height:50px;display: flex; align-items:center;">
      <img style="margin: 0 7px 5px 0;" src="/stylesheets/icons/back.svg" width="18" height="18" href="#"
        alt="homepage">

      <div class="col-md-4" style="margin-top: 20px;">
        <ul class="text-muted">
          <h4> {{user.name}} </h4>
          <small>{{user.tweets.length}}推文</small>
        </ul>
      </div>
    </div>
    <!-- 中間cover -->
    <div class="card mb-3">
      <div style="position: relative;">
        <img src="/stylesheets/icons/cover.svg" class="card-img-top" alt="...">
        <img src="/stylesheets/icons/avatar.png" class="rounded-circle"
          style="position: absolute; bottom: 0; left: 0; margin-left: 15px; margin-bottom: -20px;" width="150"
          height="150" alt="Avatar">
      </div>
      <div class="card-body d-flex justify-content-between align-items-start">
        <div>
          <h3 class="card-title">{{user.name}}</h3>
          <h5> @{{user.name}}</h5>
          <p class="card-text">{{user.description}}</p>
          <div class="card-text">
            <div class="d-flex align-items-center">
              <small class="text-body-secondary">{{user.Followings.length}}個跟隨中</small>
              <small class="ml-3">{{user.Followers.length}}位跟隨者</small>
            </div>
          </div>
        </div>
        <button class="btn btn-outline-secondary btn-orange">編輯個人資料</button>
      </div>

      <!-- user tabs -->
      <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">推文</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">回覆</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">喜歡的內容</a>
        </li>
      </ul>
    </div>



    <!-- 中間貼文 -->
    {{#each user.Tweets}}
    <div style="padding:5px 15px; border-top:2px #ECECEC solid;">
      <div class="position-relative">
        <span style="font-size:18px;" id="name"><strong>{{../user.name}} </strong></span>
        <span style="color:gray; font-size:14px;"> @{{../user.account}}·{{relativeTimeFromNow
          this.createdAt}}</span>
        <p style="margin: 2px 0; word-break: break-all;">{{this.description}}</p>

        <div id="icon-container" style="display: flex; align-items:center">

          <img id="reply" data-bs-toggle="modal" data-bs-target="#replyModal"
            style="margin: 0 25px 0 0; cursor:pointer;" src="/stylesheets/icons/reply_outlined.svg" width="16"
            height="16" href="#" alt="reply">

          {{#if this.isLiked}}
          <form id="unlike" name="unlike" action="/tweets/{{this.id}}/unlike" method="POST"
            style="display: flex; align-items:center;">
            <input type="image" img src="/stylesheets/icons/like_filled.svg" width="16" height="16"
              onClick="document.unlike.submit()">
          </form>
          {{else}}
          <form id="like" name="like" action="/tweets/{{this.id}}/like" method="POST"
            style="display: flex; align-items:center;">
            <input type="image" img src="/stylesheets/icons/like_outlined.svg" width="16" height="16"
              onClick="document.unlike.submit()">
          </form>
          {{/if}}
          <span style="margin:0 8px;">{{this.likeCount}}</span>
        </div>
      </div>
    </div>
    {{/each}}
  </div>








  <!-- 右側推薦跟隨 -->
  <div class=" col-4" style="padding: 12px 0 0 20px;">
    <div class=" card" style="width: 18rem;">
      <div class="card-header" style="display:flex;align-items:center;">
        <span style="font-size:22px;"><strong>推薦跟隨</strong></span>
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item" style="background-color: #F5F5F5; border-color:#F5F5F5">An item</li>
        <li class=" list-group-item" style="background-color: #F5F5F5; border-color:#F5F5F5">A second item</li>
        <li class="list-group-item" style="background-color: #F5F5F5; border-color:#F5F5F5">A third item</li>
      </ul>
    </div>
  </div>
</div>

<!-- 推文Modal -->
<div class="modal fade" id="tweetModal" tabindex="-1" aria-labelledby="tweetModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="tweetModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form action="/tweets" method="POST">
        <div class="modal-body">
          <textarea class="form-control" id="description" name="description" rows="3" cols="140" placeholder="有什麼新鮮事?"
            required></textarea>
        </div>

        <div class="modal-footer">
          <button type="submit" id="btn-tweet" style="color: white; background-color:rgb(255, 106, 0); font-size:14px;">
            <strong>推文</strong>
          </button>
        </div>

      </form>

    </div>
  </div>
</div>

<!-- 回覆Modal -->
<div class="modal fade" id="replyModal" tabindex="-1" aria-labelledby="replyModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="replyModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form action="/tweets" method="POST">
        <div class="modal-body">

          <strong><span id="modal-name" style="font-size:18px;"> </span></strong>
          {{!-- <span style="color:gray; font-size:14px;"> @{{this.User.account}}·{{relativeTimeFromNow
            this.createdAt}}</span>
          <p style="margin: 2px 0; word-break: break-all;">{{this.description}}</p> --}}

          <textarea class="form-control" id="description" name="description" rows="3" cols="140" placeholder="推你的回覆"
            required></textarea>
        </div>

        <div class="modal-footer">
          <button type="submit" id="btn-tweet" style="color: white; background-color:rgb(255, 106, 0); font-size:14px;">
            <strong>回覆</strong>
          </button>
        </div>

      </form>

    </div>
  </div>
</div>


<script>
  const reply = document.getElementById('reply');

  reply.addEventListener('click', function () {
    const nameElement = document.querySelector("#name strong"); // 選取 strong 元素內的文字內容
    const name = nameElement.textContent; // 取得文字內容
    document.querySelector("#modal-name").textContent = name;
  }, false);


</script>