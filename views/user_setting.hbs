<section id="Huei-region" class="">
  <div class="flex-home-page">

    <section class="left-region-sidebar">
      {{> home-tabs-middleware-ByYS route='setting'}}
    </section>

    <section id="ys-FE-users-setting" class="followships-layout">

      <form action="/users/{{loginUser.id}}/setting" id="setting-region" method="POST" onsubmit="return checkform()">

        <h4 class="title">帳戶設定</h4>

        {{> message}}

        <script>
          function changeFocus (element) {
            const target = document.querySelector('.' + element + '-status')
            if (target.classList.contains('focus')) {
              target.classList.remove('focus')
              return
            }
            target.classList.toggle('focus')
          }
          function counts () {
            const counts = document.querySelector('#name').value.length
            document.querySelector('.name-count span').innerText = counts + '/50'
            const status = document.querySelector('.name-status')
            if (status.classList.contains('focus') && counts > 50) {
              document.querySelector('.name-helper span').innerText = '字數超出上限！'
              status.classList.remove('focus')
              status.classList.toggle('warn')
              return
            }
            if (status.classList.contains('warn') && counts <= 50) {
              status.classList.remove('warn')
              status.classList.toggle('focus')
              document.querySelector('.name-helper span').innerText = ''
            }
          }
          function checkform () {
            const counts = document.querySelector('#name').value.length
            if (counts > 50) {
              alert('字數超出上限！')
              return false
            }
          }
        </script>

        <div class="input">
          <label for="account">帳號</label>
          <input name="newAccount" id="account" type="text" placeholder="請輸入帳號" value="{{loginUser.account}}"
            onfocus="changeFocus('account')" onblur="changeFocus('account')" required>
          <div class="status account-status"></div>
          <div class="helper"><span></span></div>
          <div class="count"><span></span></div>
        </div>

        <div class="input">
          <label for="name">名稱</label>
          <input name="newName" id="name" type="text" placeholder="請輸入使用者名稱" value="{{loginUser.name}}" onfocus="changeFocus('name')"
            onblur="changeFocus('name')" oninput="counts()" required>
          <div class="status name-status"></div>
          <div class="helper name-helper"><span></span></div>
          <div class="count name-count"><span>0/50</span></div>
        </div>

        <div class="input">
          <label for="email">Email</label>
          <input name="newEmail" id="email" type="email" placeholder="請輸入Email" value="{{loginUser.email}}" onfocus="changeFocus('email')"
            onblur="changeFocus('email')" required>
          <div class="status email-status"></div>
          <div class="helper"><span></span></div>
          <div class="count"><span></span></div>
        </div>

        <div class="input">
          <label for="password">密碼</label>
          <input name="newPassword" id="password" type="password" placeholder="請設定密碼" onfocus="changeFocus('password')"
            onblur="changeFocus('password')" required>
          <div class="status password-status"></div>
          <div class="helper"><span></span></div>
          <div class="count"><span></span></div>
        </div>

        <div class="input">
          <label for="checkPassword">密碼確認</label>
          <input name="newCheckPassword" id="checkPassword" type="password" placeholder="請再次輸入密碼"
            onfocus="changeFocus('checkPassword')" onblur="changeFocus('checkPassword')" required>
          <div class="status checkPassword-status"></div>
          <div class="helper"><span></span></div>
          <div class="count"><span></span></div>
        </div>

        <button type="submit" class="submit"><span>儲存</span></button>
      </form>
    </section>




  </div>
</section>